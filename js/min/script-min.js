$(function(){function e(){!Modernizr.objectfit&&$(".img-fit").length&&$(".img-fit").each(function(){var e=$(this),t=e.find("img").prop("src");t&&e.css("backgroundImage","url("+t+")").addClass("compat-object-fit")})}function t(){i=$(document).scrollTop(),requestAnimFrame(t)}function a(){function e(){if(d.is(":checked")&&i.find(".active").length){if(void 0!==i.find(".active").attr("data-adjacent")){var e=i.find(".active").attr("data-adjacent").split(","),t=e.length,a=0;for(a;t>a;a++)i.find('[data-department="'+e[a]+'"]').attr("class","department adjacent")}}else if(!d.is(":checked")&&i.find(".adjacent").length){var n;i.find(".active").length&&(n=i.find(".active").attr("data-department")),c.attr("class","department"),n.length&&i.find('[data-department="'+n+'"]').attr("class","department active")}}var t=$("#mapForm"),a=t.find(".map-form"),i=$("#mapFormMetropole"),n=t.find(".map-form-extra"),c=t.find(".department"),s=$("#departement"),d=$("#departement-etendre"),l=t.find("a"),r=t.find(".map-btn"),h=t.find(".btn-metropole");c.on("click",function(t){c.attr("class","department"),$(this).attr("class","department active"),s.val($(this).attr("data-department")),e(d)}),s.on("change",function(a){c.attr("class","department"),t.find('[data-department="'+s.val()+'"]').length?t.find('[data-department="'+s.val()+'"]').attr("class","department active"):("92"===s.val()||"93"===s.val()||"94"===s.val())&&t.find('[data-department="75"]').attr("class","department active").siblings().attr("class","department"),e(d)}),d.on("change",function(t){e(d)}),l.on("click",function(e){e.preventDefault(),$(this).parents(".map-btn").length?(r.removeClass("active"),h.addClass("active"),TweenMax.to($($(this).attr("href")),.2,{x:"0%",opacity:1,zIndex:1}),TweenMax.to(i,.2,{x:"-100%",opacity:0,zIndex:0})):(r.addClass("active"),h.removeClass("active"),TweenMax.to(i,.2,{x:"0%",opacity:1,zIndex:1}),TweenMax.to(n,.2,{x:"100%",opacity:0,zIndex:0}))}),o=!0}var i,n=600,c=$(window).width(),o=!1;if(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),e(),$(".social-footer").length&&$(".social-footer").addClass("closed").hover(function(){$(this).hasClass("closed")&&TweenMax.set($(this),{className:"-=closed"})},function(){var e=$(document).scrollTop();i+$(window).height()!=$(document).height()&&TweenMax.set($(this),{className:"+=closed"})}),$(".btn-choice").click(function(e){e.preventDefault(),$(this).closest(".choices").addClass("choice-"+($(this).closest("li").index()+1)+"-active choice-"+($(this).closest("li").index()+1)+"-animating")}),$(".btn-close-choice").click(function(e){e.preventDefault();var t=$(this).closest(".choices");t.removeClass("choice-1-active choice-2-active choice-3-active choice-4-active choice-5-active"),setTimeout(function(){t.removeClass("choice-1-animating choice-2-animating choice-3-animating choice-4-animating choice-5-animating")},n)}),$("#logo").on("click",function(){$("body").toggleClass("sidebar-links-open")}),$("#btn-close-sidebar-links").click(function(){$("body").removeClass("sidebar-links-open")}),$("#mapForm").length&&c>767&&(o||a()),$(".block-sub-fields").length){var s=$(".block-sub-fields"),d=s.find("> div").find("input"),l=s.find("> input");d.length&&(d.on("change",function(e){("checkbox"!==$(this).attr("type")&&$(this).val()||"checkbox"===$(this).attr("type")&&$(this).prop("checked"))&&$(this).parents(".block-sub-fields").find("> input").prop("checked",!0)}),l.on("click",function(e){var t=$(this).parents(".block-sub-fields").find("> div").find("input");$(this).prop("checked")&&t.eq(0).focus(),("checkbox"!==t&&t.val()||"checkbox"===t.attr("type")&&t.prop("checked"))&&$(this).prop("checked",!0)}))}t(),$(document).scroll(function(){i=$(document).scrollTop(),i+$(window).height()==$(document).height()?$(".social-footer").hasClass("closed")&&TweenMax.set($(".social-footer"),{className:"-=closed"}):$(".social-footer").hasClass("closed")||TweenMax.set($(".social-footer"),{className:"+=closed"})}),$(window).resize(function(){c=$(window).width(),$("#mapForm").length&&c>767&&(o||a())}),$(window).load(function(){})});