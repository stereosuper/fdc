$(function(){function t(){!Modernizr.objectfit&&$(".img-fit").length&&$(".img-fit").each(function(){var t=$(this),e=t.find("img").prop("src");e&&t.css("backgroundImage","url("+e+")").addClass("compat-object-fit")})}function e(){a=$(document).scrollTop(),requestAnimFrame(e)}function n(){function t(){if(d.is(":checked")&&a.find(".active").length){if(void 0!==a.find(".active").attr("data-adjacent")){var t=a.find(".active").attr("data-adjacent").split(","),e=t.length,n=0;for(n;e>n;n++)a.find('[data-department="'+t[n]+'"]').attr("class","department adjacent")}}else if(!d.is(":checked")&&a.find(".adjacent").length){var i;a.find(".active").length&&(i=a.find(".active").attr("data-department")),o.attr("class","department"),i.length&&a.find('[data-department="'+i+'"]').attr("class","department active")}}var e=$("#mapForm"),n=e.find(".map-form"),a=$("#mapFormMetropole"),i=e.find(".map-form-extra"),o=e.find(".department"),s=$("#departement"),d=$("#departement-etendre"),l=e.find("a"),r=e.find(".map-btn"),f=e.find(".btn-metropole");o.on("click",function(e){o.attr("class","department"),$(this).attr("class","department active"),s.val($(this).attr("data-department")),t(d)}),s.on("change",function(n){o.attr("class","department"),e.find('[data-department="'+s.val()+'"]').length?e.find('[data-department="'+s.val()+'"]').attr("class","department active"):("92"===s.val()||"93"===s.val()||"94"===s.val())&&e.find('[data-department="75"]').attr("class","department active").siblings().attr("class","department"),t(d)}),d.on("change",function(e){t(d)}),l.on("click",function(t){t.preventDefault(),$(this).parents(".map-btn").length?(r.removeClass("active"),f.addClass("active"),TweenMax.to($($(this).attr("href")),.2,{x:"0%",opacity:1,zIndex:1}),TweenMax.to(a,.2,{x:"-100%",opacity:0,zIndex:0})):(r.addClass("active"),f.removeClass("active"),TweenMax.to(a,.2,{x:"0%",opacity:1,zIndex:1}),TweenMax.to(i,.2,{x:"100%",opacity:0,zIndex:0}))}),c=!0}var a,i=600,o=$(window).width(),c=!1;if(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),jQuery.fn.toggleAttr=function(t){return this.each(function(){var e=$(this);e.attr(t)?e.removeAttr(t):e.attr(t,t)})},t(),$(".social-footer").length&&$(".social-footer").addClass("closed").hover(function(){$(this).hasClass("closed")&&TweenMax.set($(this),{className:"-=closed"})},function(){var t=$(document).scrollTop();a+$(window).height()!=$(document).height()&&TweenMax.set($(this),{className:"+=closed"})}),$(".btn-choice").click(function(t){t.preventDefault(),$(this).closest(".choices").addClass("choice-"+($(this).closest("li").index()+1)+"-active choice-"+($(this).closest("li").index()+1)+"-animating")}),$(".btn-close-choice").click(function(t){t.preventDefault();var e=$(this).closest(".choices");e.removeClass("choice-1-active choice-2-active choice-3-active choice-4-active choice-5-active"),setTimeout(function(){e.removeClass("choice-1-animating choice-2-animating choice-3-animating choice-4-animating choice-5-animating")},i)}),$("#logo").on("click",function(t){t.preventDefault(),$("body").toggleClass("sidebar-links-open")}),$("#btn-close-sidebar-links").click(function(t){t.preventDefault(),$("body").removeClass("sidebar-links-open")}),$("#btn-account").on("click",function(t){t.preventDefault(),$("body").toggleClass("sidebar-account-open")}),$("#btn-close-sidebar-account").click(function(t){t.preventDefault(),$("body").removeClass("sidebar-account-open")}),$("#mapForm").length&&o>767&&(c||n()),$(".block-sub-fields").length){var s=$(".block-sub-fields"),d=s.find("> div").find("input"),l=s.find("> input");d.length&&(d.on("change",function(t){("checkbox"!==$(this).attr("type")&&$(this).val()||"checkbox"===$(this).attr("type")&&$(this).prop("checked"))&&$(this).parents(".block-sub-fields").find("> input").prop("checked",!0)}),l.on("click",function(t){var e=$(this).parents(".block-sub-fields").find("> div").find("input");$(this).prop("checked")&&e.eq(0).focus(),("checkbox"!==e.attr("type")&&e.val()||"checkbox"===e.attr("type")&&e.prop("checked"))&&$(this).prop("checked",!0)}))}$("#editForm").on("click",function(t){var e=$("#formToEdit"),n,a=$(this);t.preventDefault(),e.length&&(e.toggleClass("form-disabled").find("input").toggleAttr("disabled"),e.find("button[type=submit]").toggleClass("hidden"),a.html(e.hasClass("form-disabled")?a.attr("data-edit"):a.attr("data-cancel")),a.toggleClass("btn-pen").toggleClass("btn-cancel").blur(),e.find(".not-filled").length&&e.find(".not-filled").toggleClass("hidden"),e.find(".block-pwd").length&&(n=e.find(".block-pwd"),n.toggleClass("hidden").find("input").toggleAttr("disabled"),n.find("button").toggleClass("hidden"),e.find(".block-pwd2").length&&e.find(".block-pwd2").toggleClass("hidden")),e.siblings(".content-footer").length&&e.siblings(".content-footer").toggleClass("hidden"))}),$("#editPwd").on("click",function(t){t.preventDefault();var e,n=$(this);n.parents(".block-pwd").length&&(e=$(this).parents(".block-pwd"),e.find("input").toggleAttr("disabled"),n.html(e.find("input").attr("disabled")?n.attr("data-edit"):n.attr("data-cancel")),n.toggleClass("btn-pen").toggleClass("btn-cancel").blur(),e.find(".block-pwd2").length&&e.find(".block-pwd2").toggleClass("hidden"))}),e(),$(document).scroll(function(){a=$(document).scrollTop(),$(window).width()>979?a+$(window).height()==$(document).height()?$(".social-footer").hasClass("closed")&&TweenMax.set($(".social-footer"),{className:"-=closed"}):$(".social-footer").hasClass("closed")||TweenMax.set($(".social-footer"),{className:"+=closed"}):TweenMax.set($(".social-footer"),{className:"-=closed"})}),$(window).resize(function(){o=$(window).width(),$("#mapForm").length&&o>767&&(c||n())}),$(window).load(function(){})});