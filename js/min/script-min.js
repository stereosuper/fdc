$(function(){function e(){!Modernizr.objectfit&&$(".img-fit").length&&$(".img-fit").each(function(){var e=$(this),a=e.find("img").prop("src");a&&e.css("backgroundImage","url("+a+")").addClass("compat-object-fit")})}function a(){i=$(document).scrollTop(),requestAnimFrame(a)}function t(){function e(){if(d.is(":checked")&&n.find(".active").length){if(void 0!==n.find(".active").attr("data-adjacent")){var e=n.find(".active").attr("data-adjacent").split(","),a=e.length,t=0;for(t;a>t;t++)n.find('[data-department="'+e[t]+'"]').attr("class","department adjacent")}}else if(!d.is(":checked")&&n.find(".adjacent").length){var o;n.find(".active").length&&(o=n.find(".active").attr("data-department")),i.attr("class","department"),o.length&&n.find('[data-department="'+o+'"]').attr("class","department active")}}var a=$("#mapForm"),t=a.find(".map-form"),n=$("#mapFormMetropole"),o=a.find(".map-form-extra"),i=a.find(".department"),s=$("#departement"),d=$("#departement-etendre"),l=a.find("a"),r=a.find(".map-btn"),h=a.find(".btn-metropole");i.on("click",function(a){i.attr("class","department"),$(this).attr("class","department active"),s.val($(this).attr("data-department")),e(d)}),s.on("change",function(t){i.attr("class","department"),a.find('[data-department="'+s.val()+'"]').length?a.find('[data-department="'+s.val()+'"]').attr("class","department active"):"92"!==s.val()&&"93"!==s.val()&&"94"!==s.val()||a.find('[data-department="75"]').attr("class","department active").siblings().attr("class","department"),e(d)}),d.on("change",function(a){e(d)}),l.on("click",function(e){e.preventDefault(),$(this).parents(".map-btn").length?(r.removeClass("active"),h.addClass("active"),TweenMax.to($($(this).attr("href")),.2,{x:"0%",opacity:1,zIndex:1}),TweenMax.to(n,.2,{x:"-100%",opacity:0,zIndex:0})):(r.addClass("active"),h.removeClass("active"),TweenMax.to(n,.2,{x:"0%",opacity:1,zIndex:1}),TweenMax.to(o,.2,{x:"100%",opacity:0,zIndex:0}))}),c=!0}function n(){if($(".nav-tabs").length){var e=$(".nav-tabs");e.hasClass("nav-tabs-indicator")||(768>l?e.height(0).find(".active").on("click",function(a){var t=0,n=0,o=e.find("li"),i=o.length;for(n;i>n;n++)o.eq(n).hasClass("active")||(t+=o.eq(n).outerHeight());e.height()>0?e.height(0):e.height(t),e.toggleClass("on")}):e.css("height","auto"))}}function o(){$("#header nav").removeClass("no-transition"),$("#sidebar-account").removeClass("no-transition"),$("#sidebar-tools").removeClass("no-transition")}var i,s=600,d=$(window).height(),l=$(window).width(),c=!1;if(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),jQuery.fn.toggleAttr=function(e){return this.each(function(){var a=$(this);a.attr(e)?a.removeAttr(e):a.attr(e,e)})},e(),$(".social-footer").length&&$(".social-footer").addClass("closed").hover(function(){$(this).hasClass("closed")&&TweenMax.set($(this),{className:"-=closed"})},function(){var e=$(document).scrollTop();i+$(window).height()!=$(document).height()&&TweenMax.set($(this),{className:"+=closed"})}),$(".btn-choice").click(function(e){if(l>767&&(e.preventDefault(),$(this).closest(".choices").addClass("choice-"+($(this).closest("li").index()+1)+"-active choice-"+($(this).closest("li").index()+1)+"-animating"),1150>=l)){var a=$(this).closest("li");$(".zone-content",a).slideToggle(300)}}),$(".btn-close-choice").click(function(e){e.preventDefault();var a=$(this).closest(".choices");if(a.removeClass("choice-1-active choice-2-active choice-3-active choice-4-active choice-5-active"),setTimeout(function(){a.removeClass("choice-1-animating choice-2-animating choice-3-animating choice-4-animating choice-5-animating")},s),1150>=l){var t=$(this).closest("li");$(".zone-content",t).slideToggle(300)}}),$("#logo").on("click",function(e){e.preventDefault(),l>1150?$("body").toggleClass("sidebar-links-open"):$("body").hasClass("sidebar-links-open")||$("body").hasClass("nav-header-open")?$("body").hasClass("sidebar-links-open")?($("body").removeClass("sidebar-links-open"),$("body").addClass("nav-header-open")):($("body").removeClass("nav-header-open"),$("body").addClass("sidebar-links-open")):$("body").addClass("nav-header-open")}),$("#mask").on("click",function(e){e.preventDefault(),$("body").removeClass("nav-header-open sidebar-links-open sidebar-account-open sidebar-tools-open")}),$("#btn-close-sidebar-links").click(function(e){e.preventDefault(),l>1150?$("body").removeClass("sidebar-links-open"):($("body").removeClass("sidebar-links-open"),$("body").addClass("nav-header-open"))}),$("#btn-close-nav-header").click(function(e){e.preventDefault(),$("body").removeClass("nav-header-open")}),$("#btn-close-header-responsive").click(function(e){e.preventDefault(),$("body").hasClass("nav-header-open")?$("body").removeClass("nav-header-open"):$("body").hasClass("sidebar-links-open")?($("body").removeClass("sidebar-links-open"),$("body").addClass("nav-header-open")):$("body").hasClass("sidebar-account-open")?($("body").removeClass("sidebar-account-open"),$("body").addClass("nav-header-open")):$("body").hasClass("sidebar-tools-open")&&($("body").removeClass("sidebar-tools-open"),$("body").addClass("nav-header-open"))}),$("#btn-account").on("click",function(e){e.preventDefault(),$("body").toggleClass("sidebar-account-open"),1150>=l&&$("body").removeClass("nav-header-open")}),$("#btn-close-sidebar-account").click(function(e){e.preventDefault(),$("body").removeClass("sidebar-account-open"),1150>=l&&$("body").addClass("nav-header-open")}),$("#btn-tools").on("click",function(e){e.preventDefault(),$("body").toggleClass("sidebar-tools-open"),1150>=l&&$("body").removeClass("nav-header-open")}),$("#btn-close-sidebar-tools").click(function(e){e.preventDefault(),$("body").removeClass("sidebar-tools-open"),1150>=l&&$("body").addClass("nav-header-open")}),n(),$("#mapForm").length&&l>767&&(c||t()),$(".block-optionnal").length){var r=0,h=$(".block-optionnal"),p=h.length;for(r;p>r;r++){var f=h.eq(r),m=$("#"+f.attr("data-name"));m.on("change",function(e){$(this).prop("checked")?f.addClass("hidden"):f.removeClass("hidden")})}}$("#editForm").on("click",function(e){var a=$("#formToEdit"),t,n=$(this);e.preventDefault(),a.length&&(a.toggleClass("form-disabled").find("input").toggleAttr("disabled"),a.find("button[type=submit]").toggleClass("hidden"),a.hasClass("form-disabled")?n.html(n.attr("data-edit")):n.html(n.attr("data-cancel")),n.toggleClass("btn-pen").toggleClass("btn-cancel").blur(),a.find(".not-filled").length&&a.find(".not-filled").toggleClass("hidden"),a.find(".block-pwd").length&&(t=a.find(".block-pwd"),t.toggleClass("hidden").find("input").toggleAttr("disabled"),t.find("button").toggleClass("hidden"),a.find(".block-pwd2").length&&a.find(".block-pwd2").toggleClass("hidden")),a.siblings(".content-footer").length&&a.siblings(".content-footer").toggleClass("hidden"))}),$("#editPwd").on("click",function(e){e.preventDefault();var a,t=$(this);t.parents(".block-pwd").length&&(a=$(this).parents(".block-pwd"),a.find("input").toggleAttr("disabled"),a.find("input").attr("disabled")?t.html(t.attr("data-edit")):t.html(t.attr("data-cancel")),t.toggleClass("btn-pen").toggleClass("btn-cancel").blur(),a.find(".block-pwd2").length&&a.find(".block-pwd2").toggleClass("hidden"))}),isBlocked&&$(".wrapper-pub").addClass("hidden"),a(),$(document).scroll(function(){i=$(document).scrollTop(),$(window).width()>979?i+$(window).height()==$(document).height()?$(".social-footer").hasClass("closed")&&TweenMax.set($(".social-footer"),{className:"-=closed"}):$(".social-footer").hasClass("closed")||TweenMax.set($(".social-footer"),{className:"+=closed"}):TweenMax.set($(".social-footer"),{className:"-=closed"})});var v;$(window).resize(function(){var e=$(window).height(),a=$(window).width();a!=l&&($("body").removeClass("sidebar-links-open sidebar-account-open nav-header-open sidebar-tools-open"),$(".choices").removeClass("choice-1-active choice-2-active choice-3-active choice-4-active choice-5-active choice-1-animating choice-2-animating choice-4-animating choice-5-animating"),$(".choices .zone-content").attr("style",""),$("#header nav").addClass("no-transition"),$("#sidebar-account").addClass("no-transition"),$("#sidebar-tools").addClass("no-transition"),clearTimeout(v),v=setTimeout(o,100)),d=e,l=a,n(),$("#mapForm").length&&l>767&&(c||t())}),$(window).load(function(){})});