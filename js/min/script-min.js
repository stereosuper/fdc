$(function(){function e(){!Modernizr.objectfit&&$(".img-fit").length&&$(".img-fit").each(function(){var e=$(this),a=e.find("img").prop("src");a&&e.css("backgroundImage","url("+a+")").addClass("compat-object-fit")})}function a(){r=$(document).scrollTop(),requestAnimFrame(a)}function n(){function e(){if(l.is(":checked")&&t.find(".active").length){if(void 0!==t.find(".active").attr("data-adjacent")){var e=t.find(".active").attr("data-adjacent").split(","),a=e.length,n=0;for(n;a>n;n++)t.find('[data-department="'+e[n]+'"]').attr("class","department adjacent")}}else if(!l.is(":checked")&&t.find(".adjacent").length){var i;t.find(".active").length&&(i=t.find(".active").attr("data-department")),s.attr("class","department"),i.length&&t.find('[data-department="'+i+'"]').attr("class","department active")}}var a=$("#mapForm"),n=a.find(".map-form"),t=$("#mapFormMetropole"),i=a.find(".map-form-extra"),s=a.find(".department"),o=$("#departement"),l=$("#departement-etendre"),d=a.find("a"),c=a.find(".map-btn"),r=a.find(".btn-metropole");s.on("click",function(a){s.attr("class","department"),$(this).attr("class","department active");var n=$(this).attr("data-department"),t=o.find("option[data-value='"+n+"']");o.val(t.val()),e(l)}),o.on("change",function(n){s.attr("class","department");var t=o.find(":selected").data("value"),i=a.find('[data-department="'+t+'"]');i.length?i.attr("class","department active"):"92"!=t&&"93"!=t&&"94"!=t||a.find('[data-department="75"]').attr("class","department active").siblings().attr("class","department"),e(l)}),l.on("change",function(a){e(l)}),d.on("click",function(e){e.preventDefault(),$(this).parents(".map-btn").length?(c.removeClass("active"),r.addClass("active"),TweenMax.to($($(this).attr("href")),.2,{x:"0%",opacity:1,zIndex:1}),TweenMax.to(t,.2,{x:"-100%",opacity:0,zIndex:0})):(c.addClass("active"),r.removeClass("active"),TweenMax.to(t,.2,{x:"0%",opacity:1,zIndex:1}),TweenMax.to(i,.2,{x:"100%",opacity:0,zIndex:0}))}),v=!0}function t(){if($(".nav-tabs").length){var e=$(".nav-tabs");e.hasClass("nav-tabs-indicator")||(768>p?e.height(0).find(".active").on("click",function(a){var n=0,t=0,i=e.find("li"),s=i.length;for(t;s>t;t++)i.eq(t).hasClass("active")||(n+=i.eq(t).outerHeight());e.height()>0?e.height(0):e.height(n),e.toggleClass("on")}):e.css("height","auto"))}}function i(){$(".news").length&&(TweenMax.set($(".news > li article"),{clearProps:"height"}),$(".news > li article").each(function(e){TweenMax.set($(this),{height:$(this).closest("li").height()+"px"})}))}function s(){$("#header nav").length&&$("#header nav").removeClass("no-transition"),$("#sidebar-account").length&&$("#sidebar-account").removeClass("no-transition"),$("#sidebar-tools").length&&$("#sidebar-tools").removeClass("no-transition"),$("#sidebar-links").length&&$("#sidebar-links").removeClass("no-transition"),$(".bg-sidebar").length&&$(".bg-sidebar").removeClass("no-transition")}function o(){0==u?$(".prev-slide").hide():$(".prev-slide").show(),u==$("#toSlide li").length-1?$(".next-slide").hide():$(".next-slide").show()}function l(){var e=-$("#toSlide li").eq(0).width()*u;TweenMax.to($("#toSlide li"),.2,{x:e})}function d(e){"undefined"!=typeof K&&K.setMap(null);var a=!1,n;"edit"==$("#map-canvas").attr("data-mode")?a=!0:n={url:"layoutImg/pin@2x.png",scaledSize:new google.maps.Size(45,39),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(12,38)},K=new google.maps.Marker({map:_,position:e,icon:n,draggable:a,raiseOnDrag:a}),K.addListener("dragend",function(e){var a=e.latLng.lat(),n=e.latLng.lng(),t=new google.maps.LatLng(a,n);N.val(a),H.val(n),c(t)})}function c(e){R.geocode({latLng:e},function(e,a){if(a!=google.maps.GeocoderStatus.OK)return void console.log("Geocoder failed due to: "+a);if(!e[0])return void console.log("No results found");var n=e[0];$("#geolocalisation").val(n.formatted_address)})}var r,h=600,g=$(window).height(),p=$(window).width(),v=!1,m,f=$("body"),u=0;if(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),jQuery.fn.toggleAttr=function(e){return this.each(function(){var a=$(this);a.attr(e)?a.removeAttr(e):a.attr(e,e)})},e(),i(),$(".social-footer").length&&$(".social-footer").addClass("closed").hover(function(){$(this).hasClass("closed")&&TweenMax.set($(this),{className:"-=closed"})},function(){var e=$(document).scrollTop();r+$(window).height()!=$(document).height()&&TweenMax.set($(this),{className:"+=closed"})}),$(".choices").length){var b=$(".choices"),C=b.find(".btn-choice"),w=b.find(".visuel"),k=b.find("li").length,x=0,T=4,L=5,y=200,M=200,D=new SteppedEase(T-1),S=[];for(x;k>x;x++){var z=0,A=w.eq(x);for(S[x]=new TimelineMax({paused:!0}),z;L>z;z++)S[x].add(TweenMax.fromTo(A,.15,{backgroundPosition:"0 -"+y*z+"px"},{backgroundPosition:"-"+M*(T-1)+"px -"+y*z+"px",ease:D}));TweenMax.set(A,{backgroundPosition:"0 0"})}C.on("mouseenter",function(){if(!(b.hasClass("choice-1-active")||b.hasClass("choice-2-active")||b.hasClass("choice-3-active")||b.hasClass("choice-4-active")||b.hasClass("choice-5-active"))){var e=$(this).parents("li").index();S[e].play()}}).on("mouseout",function(){var e=$(this).parents("li").index();S[e].reverse()})}if($(".choices").length&&C.click(function(e){if(p>767){if(e.preventDefault(),$(this).closest(".choices").hasClass("choice-"+($(this).closest("li").index()+1)+"-active")){var a=$(this).closest(".choices");a.removeClass("choice-1-active choice-2-active choice-3-active choice-4-active choice-5-active"),setTimeout(function(){a.removeClass("choice-1-animating choice-2-animating choice-3-animating choice-4-animating choice-5-animating")},h)}else $(this).closest(".choices").addClass("choice-"+($(this).closest("li").index()+1)+"-active choice-"+($(this).closest("li").index()+1)+"-animating");if(1150>=p){var n=$(this).closest("li");$(".zone-content",n).slideToggle(300)}else{var t=$(this).parents("li").index();S[t].reverse()}}}),$(".btn-close-choice").click(function(e){e.preventDefault();var a=$(this).closest(".choices");if(a.removeClass("choice-1-active choice-2-active choice-3-active choice-4-active choice-5-active"),setTimeout(function(){a.removeClass("choice-1-animating choice-2-animating choice-3-animating choice-4-animating choice-5-animating")},h),1150>=p){var n=$(this).closest("li");$(".zone-content",n).slideToggle(300)}}),$("#logo").on("click",function(e){e.preventDefault(),p>1280?f.toggleClass("sidebar-links-open"):f.hasClass("sidebar-links-open")||f.hasClass("nav-header-open")?f.hasClass("sidebar-links-open")?f.removeClass("sidebar-links-open").addClass("nav-header-open"):f.removeClass("nav-header-open").addClass("sidebar-links-open"):f.addClass("nav-header-open")}),$("#mask").on("click",function(e){e.preventDefault(),f.removeClass("nav-header-open sidebar-links-open sidebar-account-open sidebar-tools-open")}),$("#btn-close-sidebar-links").click(function(e){e.preventDefault(),p>1280?f.removeClass("sidebar-links-open"):f.removeClass("sidebar-links-open").addClass("nav-header-open")}),$("#btn-close-nav-header").click(function(e){e.preventDefault(),f.removeClass("nav-header-open")}),$("#btn-close-header-responsive").click(function(e){e.preventDefault(),f.hasClass("nav-header-open")?f.removeClass("nav-header-open"):f.hasClass("sidebar-links-open")?f.removeClass("sidebar-links-open").addClass("nav-header-open"):f.hasClass("sidebar-account-open")?f.removeClass("sidebar-account-open").addClass("nav-header-open"):f.hasClass("sidebar-tools-open")&&f.removeClass("sidebar-tools-open").addClass("nav-header-open")}),$("#btn-account").on("click",function(e){e.preventDefault(),f.toggleClass("sidebar-account-open"),1280>=p&&f.removeClass("nav-header-open")}),$("#btn-close-sidebar-account").click(function(e){e.preventDefault(),f.removeClass("sidebar-account-open"),1280>=p&&f.addClass("nav-header-open")}),$("#btn-tools").on("click",function(e){e.preventDefault(),f.toggleClass("sidebar-tools-open"),1280>=p&&f.removeClass("nav-header-open")}),$("#btn-close-sidebar-tools").click(function(e){e.preventDefault(),f.removeClass("sidebar-tools-open"),1280>=p&&f.addClass("nav-header-open")}),t(),$("#mapForm").length&&p>767&&(v||n()),$(".block-optionnal").length){var z=0,I=$(".block-optionnal"),q=I.length;for(z;q>z;z++){var F=I.eq(z),P=$("#"+F.attr("data-name"));P.on("change",function(e){$(this).prop("checked")?F.addClass("hidden"):F.removeClass("hidden")})}}$("#editForm").on("click",function(e){var a=$("#formToEdit"),n,t=$(this);e.preventDefault(),a.length&&(a.toggleClass("form-disabled").find("input").toggleAttr("disabled"),a.find("button[type=submit]").toggleClass("hidden"),a.hasClass("form-disabled")?t.html(t.attr("data-edit")):t.html(t.attr("data-cancel")),t.toggleClass("btn-pen").toggleClass("btn-cancel").blur(),a.find(".not-filled").length&&a.find(".not-filled").toggleClass("hidden"),a.find(".block-pwd").length&&(n=a.find(".block-pwd"),n.toggleClass("hidden").find("input").toggleAttr("disabled"),n.find("button").toggleClass("hidden"),a.find(".block-pwd2").length&&a.find(".block-pwd2").toggleClass("hidden")),a.siblings(".content-footer").length&&a.siblings(".content-footer").toggleClass("hidden"))}),$("#editPwd").on("click",function(e){e.preventDefault();var a,n=$(this);n.parents(".block-pwd").length&&(a=$(this).parents(".block-pwd"),a.find("input").toggleAttr("disabled"),a.find("input").attr("disabled")?n.html(n.attr("data-edit")):n.html(n.attr("data-cancel")),n.toggleClass("btn-pen").toggleClass("btn-cancel").blur(),a.find(".block-pwd2").length&&a.find(".block-pwd2").toggleClass("hidden"))}),isBlocked&&$(".wrapper-pub").addClass("hidden"),a(),$(document).scroll(function(){r=$(document).scrollTop(),$(window).width()>979?r+$(window).height()==$(document).height()?$(".social-footer").hasClass("closed")&&TweenMax.set($(".social-footer"),{className:"-=closed"}):$(".social-footer").hasClass("closed")||TweenMax.set($(".social-footer"),{className:"+=closed"}):TweenMax.set($(".social-footer"),{className:"-=closed"})});var j=new Hammer(document.getElementById("sidebar-links"));j.on("swipeleft",function(e){1280>=p&&(f.hasClass("sidebar-links-open")||f.hasClass("nav-header-open")?f.hasClass("sidebar-links-open")?f.removeClass("sidebar-links-open").addClass("nav-header-open"):f.removeClass("nav-header-open").addClass("sidebar-links-open"):f.addClass("nav-header-open"))});var B=new Hammer(document.getElementById("nav-header"));if(B.on("swiperight",function(e){1280>=p&&(f.hasClass("sidebar-links-open")||f.hasClass("nav-header-open")?f.hasClass("sidebar-links-open")?f.removeClass("sidebar-links-open").addClass("nav-header-open"):f.removeClass("nav-header-open").addClass("sidebar-links-open"):f.addClass("nav-header-open"))}),$(window).resize(function(){var e=$(window).height(),a=$(window).width();a!=p&&(f.removeClass("sidebar-links-open sidebar-account-open nav-header-open sidebar-tools-open"),$(".choices").length&&b.removeClass("choice-1-active choice-2-active choice-3-active choice-4-active choice-5-active choice-1-animating choice-2-animating choice-4-animating choice-5-animating").find(".zone-content").attr("style",""),$("#header nav").length&&$("#header nav").addClass("no-transition"),$("#sidebar-account").length&&$("#sidebar-account").addClass("no-transition"),$("#sidebar-tools").length&&$("#sidebar-tools").addClass("no-transition"),$("#sidebar-links").length&&$("#sidebar-links").addClass("no-transition"),$(".bg-sidebar").length&&$(".bg-sidebar").addClass("no-transition"),clearTimeout(m),m=setTimeout(s,100)),g=e,p=a,t(),$("#mapForm").length&&p>767&&(v||n()),$("#toSlide").length>0&&($("#toSlide li").each(function(e,a){$(this).css("left",e*$(this).width())}),l()),i()}),$(window).load(function(){i()}),$("#toSlide").length>0){$("#toSlide").prepend('<button class="prev-slide" />'),$("#toSlide").append('<button class="next-slide" />'),$("#toSlide li").each(function(e,a){$(this).css("left",e*$(this).width()-1)}),o(),$(".prev-slide").click(function(e){u--,o(),l()}),$(".next-slide").click(function(e){u++,o(),l()});var E=new Hammer(document.getElementById("toSlide"));E.on("swipeleft",function(e){u<$("#toSlide li").length-1&&(u++,o(),l())}),E.on("swiperight",function(e){u>0&&(u--,o(),l())})}if($(".lBslider").tosrus(),"undefined"!=typeof google&&$("body").hasClass("hasMaps")){var N=$("#latitude"),H=$("#longitude"),R=new google.maps.Geocoder,G=new google.maps.LatLng($("#map-canvas").attr("data-latIni"),$("#map-canvas").attr("data-longIni")),O={zoom:9,center:G},_=new google.maps.Map(document.getElementById("map-canvas"),O),K,Q=document.getElementById("geolocalisation"),J=new google.maps.places.Autocomplete(Q);if(J.bindTo("bounds",_),google.maps.event.addListener(J,"place_changed",function(){var e=J.getPlace();if(e.geometry){var a=e.geometry.location.lat(),n=e.geometry.location.lng(),t=new google.maps.LatLng(a,n);N.val(a),H.val(n),d(t),_.setCenter(t)}}),"edit"==$("#map-canvas").attr("data-mode")&&google.maps.event.addListener(_,"click",function(e){var a=e.latLng.lat(),n=e.latLng.lng(),t=new google.maps.LatLng(a,n);N.val(a),H.val(n),d(t),c(t)}),void 0!=$("#map-canvas").attr("data-pinLat")&&void 0!=$("#map-canvas").attr("data-pinLong")){var U=new google.maps.LatLng($("#map-canvas").attr("data-pinLat"),$("#map-canvas").attr("data-pinLong"));d(U)}}});